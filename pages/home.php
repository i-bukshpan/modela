<!-- Homepage -->

<!-- Hero Section -->
<section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-grid-pattern"></div>
    <div class="hero-content">
        <div class="hero-badge animate-on-scroll">
            <i data-lucide="sparkles"></i>
            סטודיו יצירתי להדפסת תלת מימד
        </div>
        <h1 class="animate-on-scroll">
            מדמיון<br>
            <span class="highlight">למציאות תלת־ממדית</span>
        </h1>
        <p class="hero-subtitle animate-on-scroll">
            מודלה הופכת כל רעיון למוצר מוחשי — בהתאמה אישית, בדיוק מרבי,
            ובתהליך מלא משלבי הדמיון ועד ההדפסה.
        </p>
        <div class="hero-buttons animate-on-scroll">
            <a href="?page=gallery" class="btn btn-primary">
                <i data-lucide="grid-3x3"></i>
                ראה פרויקטים
            </a>
            <a href="?page=contact" class="btn btn-secondary">
                <i data-lucide="send"></i>
                בשיחת ייעוץ חינם
            </a>
        </div>

        <div class="hero-stats">
            <div class="hero-stat animate-on-scroll">
                <div class="stat-number" data-count="500">0</div>
                <div class="stat-label">הדפסות מוצלחות</div>
            </div>
            <div class="hero-stat animate-on-scroll">
                <div class="stat-number" data-count="200">0</div>
                <div class="stat-label">לקוחות מרוצים</div>
            </div>
            <div class="hero-stat animate-on-scroll">
                <div class="stat-number" data-count="99">0</div>
                <div class="stat-label">% שביעות רצון</div>
            </div>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="section">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>מה אנחנו יוצרים?</h2>
            <p>הדפסת תלת-מימד היא עולם שלם של אפשרויות. הנה הקטגוריות העיקריות שלנו:</p>
        </div>
        <div class="categories-grid" id="categoriesGrid">
            <a href="?page=gallery&cat=custom" class="category-card glass-card animate-on-scroll">
                <div class="cat-icon"><i data-lucide="palette"></i></div>
                <h3>התאמה אישית</h3>
                <p>עיצוב ויצור מוצרים לפי דרישה ספציפית</p>
            </a>
            <a href="?page=gallery&cat=medical" class="category-card glass-card animate-on-scroll">
                <div class="cat-icon"><i data-lucide="heart-pulse"></i></div>
                <h3>פתרונות רפואיים</h3>
                <p>מודלים ועזרים לתחום הרפואה והשיקום</p>
            </a>
            <a href="?page=gallery&cat=gifts" class="category-card glass-card animate-on-scroll">
                <div class="cat-icon"><i data-lucide="gift"></i></div>
                <h3>מתנות ייחודיות</h3>
                <p>מתנות עם משמעות שאי אפשר למצוא בחנות</p>
            </a>
            <a href="?page=gallery&cat=prototype" class="category-card glass-card animate-on-scroll">
                <div class="cat-icon"><i data-lucide="cpu"></i></div>
                <h3>אב טיפוס</h3>
                <p>פיתוח וניסוי מוצרים לפני מעבר למסה</p>
            </a>
        </div>
    </div>
</section>

<!-- The Process -->
<section class="section" style="background: var(--bg-surface);">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>איך זה עובד?</h2>
            <p>הדרך מהרעיון שלך ועד למוצר המודפס פשוטה ומהירה</p>
        </div>
        <div class="process-steps">
            <div class="process-step animate-on-scroll">
                <div class="step-number">1</div>
                <h3>הרעיון</h3>
                <p>שולחים לנו סקיצה, קובץ או פשוט מסבירים את הרעיון</p>
            </div>
            <div class="process-step animate-on-scroll">
                <div class="step-number">2</div>
                <h3>התכנון</h3>
                <p>אנחנו מעצבים מודל דיגיטלי ושולחים לאישורך</p>
            </div>
            <div class="process-step animate-on-scroll">
                <div class="step-number">3</div>
                <h3>ההדפסה</h3>
                <p>המדפסות שלנו נכנסות לעבודה בדיוק מקסימלי</p>
            </div>
            <div class="process-step animate-on-scroll">
                <div class="step-number">4</div>
                <h3>המשלוח</h3>
                <p>המוצר המוכן מגיע אליך ארוז ומוכן לשימוש</p>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products -->
<section class="section">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>פרויקטים נבחרים</h2>
            <p>הצצה אל חלק מהעבודות שביצענו לאחרונה</p>
        </div>
        <div class="featured-scroll" id="featuredScroll">
            <!-- Loading skeleton placeholder -->
            <div class="skeleton" style="height:300px; width:320px; border-radius:var(--radius-lg)"></div>
            <div class="skeleton" style="height:300px; width:320px; border-radius:var(--radius-lg)"></div>
            <div class="skeleton" style="height:300px; width:320px; border-radius:var(--radius-lg)"></div>
        </div>
        <div style="text-align:center;margin-top:var(--space-2xl)">
            <a href="?page=gallery" class="btn btn-secondary">לגלריה המלאה</a>
        </div>
    </div>
</section>

<!-- Latest from Blog -->
<section class="section" style="background: var(--bg-surface);">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>מהחדש בבלוג</h2>
            <p>עדכונים, טיפים וסיפורים מעניינים מעולם התלת-מימד</p>
        </div>
        <div class="blog-grid" id="homeBlogGrid">
            <!-- Loaded via JS -->
        </div>
        <div style="text-align:center;margin-top:var(--space-2xl)">
            <a href="?page=blog" class="btn btn-secondary">לכל הכתבות</a>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="section">
    <div class="container">
        <div class="section-header animate-on-scroll">
            <h2>מה אומרים עלינו?</h2>
            <p>הלקוחות שלנו הם השגרירים הכי טובים שלנו</p>
        </div>
        <div class="testimonials-grid">
            <div class="testimonial-card glass-card animate-on-scroll">
                <p class="testimonial-text">הזמנתי דגם מורכב והתוצאה הייתה מעל ומעבר לציפיות. הדיוק מדהים והשירות היה
                    אישי ומקצועי.</p>
                <div class="testimonial-author">
                    <div class="author-avatar">א</div>
                    <div>
                        <strong>אלכס ק.</strong>
                        <div style="font-size:0.85rem; color:var(--text-muted)">מעצב מוצר</div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card glass-card animate-on-scroll">
                <p class="testimonial-text">פתרון רפואי יצירתי שעזר לנו מאוד. מודלה הבינו בדיוק את הצורך וסיפקו פתרון
                    מהיר.</p>
                <div class="testimonial-author">
                    <div class="author-avatar">ד</div>
                    <div>
                        <strong>ד"ר לוי</strong>
                        <div style="font-size:0.85rem; color:var(--text-muted)">מכון שיקום</div>
                    </div>
                </div>
            </div>
            <div class="testimonial-card glass-card animate-on-scroll">
                <p class="testimonial-text">הדפסת מתנה אישית ליום הולדת - יצא יפהפה ומרגש. מומלץ בחום!</p>
                <div class="testimonial-author">
                    <div class="author-avatar">ש</div>
                    <div>
                        <strong>שירה מ.</strong>
                        <div style="font-size:0.85rem; color:var(--text-muted)">לקוחה פרטית</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        initCounters();

        // Load Featured Products
        const featured = await fetchProducts({ featured: true, limit: 6 });
        const featuredContainer = document.getElementById('featuredScroll');
        if (featured.length > 0) {
            featuredContainer.innerHTML = featured.map(p => createProductCard(p)).join('');
        } else {
            featuredContainer.innerHTML = '<p class="text-center">אין פרויקטים נבחרים כרגע</p>';
        }

        // Load Latest Blog Posts
        const blogContainer = document.getElementById('homeBlogGrid');
        try {
            const { data: posts } = await getSupabase()
                .from('blog_posts')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(3);

            if (posts && posts.length > 0) {
                blogContainer.innerHTML = posts.map(post => `
                <article class="blog-card glass-card animate-on-scroll" onclick="window.location.href='?page=post&slug=${post.slug}'">
                    <div class="blog-card-image">
                        <img src="${post.cover_image || 'css/img/blog-fallback.jpg'}" alt="${post.title}">
                    </div>
                    <div class="blog-card-content">
                        <div class="blog-card-date">${formatDateHe(post.created_at)}</div>
                        <h3 class="blog-card-title">${post.title}</h3>
                        <p class="blog-card-excerpt">${post.excerpt || ''}</p>
                    </div>
                </article>
            `).join('');
            } else {
                blogContainer.innerHTML = '<p class="text-center" style="grid-column: 1/-1;">המאמרים שלנו יופיעו כאן בקרוב</p>';
            }
        } catch (e) {
            console.error(e);
        }

        if (typeof lucide !== 'undefined') lucide.createIcons();
        initScrollAnimations();
    });
</script>